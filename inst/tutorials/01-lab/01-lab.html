<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />

<title>Lab: R Math &amp; Programming Refresher</title>

<!-- HEAD_CONTENT -->

<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>
<!-- end tabsets -->


<link rel="stylesheet" href="css\learnr-theme.css" type="text/css" />

</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-doing-ols-by-hand" class="section level2">
<h2>Doing OLS by hand</h2>
<p>We have all used the ordinary least squares estimator for linear
regression. But have you ever implemented it by hand? This will be your
task for this exercise!</p>
<p>At the same time, this exercise will be a segue into Session 2 of our
workshop, which focuses on generalized linear models.</p>
<p>Note that we will not <em>derive</em> the OLS estimator by hand.
Instead, you will get the derivation and translate it into R code.</p>
<p>The exercise consists of two parts:</p>
<div id="section-part-1" class="section level4">
<h4>Part 1</h4>
<ol style="list-style-type: decimal">
<li>Data preparation</li>
<li>Estimation</li>
</ol>
</div>
<div id="section-part-2" class="section level4">
<h4>Part 2</h4>
<ol style="list-style-type: decimal">
<li>Processing (“Prediction”)</li>
<li>Visualization</li>
<li><em>Bonus:</em> Validity checks</li>
</ol>
</div>
<div id="section-notes" class="section level3">
<h3>Notes</h3>
<ul>
<li>This exercise may be challenging at times, but I have supplied
numerous hints for you.</li>
<li>If you get stuck, feel free ask me for additional hints.</li>
<li>You can view the solutions, though I suggest you try to figure it
out on your own first.</li>
<li>If serial tasks rely on objects you are prompted to generate, the
correct objects will be pre-loaded in all subsequent steps (provided you
work in the <code>learnr</code> environment).</li>
</ul>
</div>
</div>
<div id="section-the-linear-model" class="section level2">
<h2>The linear model</h2>
<p>The linear model is a special case of generalized linear models (more
on this in the next session).</p>
<p>The OLS estimator for multivariate regression analyses requires
calculations in matrix form.</p>
<div id="section-model-specification" class="section level3">
<h3>Model specification:</h3>
<p>Likelihood: <span class="math display">\[\mathbf{y}_i \sim
\text{N}(\mu_i, \sigma^2) \text{ for all }i = 1,...N\]</span></p>
<p>Systematic component: <span class="math display">\[\mu_i =
\mathbf{x}_i^{\prime} \beta  \text{ for all }i = 1,...N\]</span></p>
</div>
<div id="section-four-way-to-denote-the-linear-model-formula"
class="section level3">
<h3>Four way to denote the linear model formula</h3>
<ol style="list-style-type: decimal">
<li>Scalar form: <span class="math display">\[y_i = \beta_1 x_{i1} +
\beta_2 x_{i2} + \beta_3 x_{i3} + \epsilon_i \text{ for all }
i=1,...,N\]</span></li>
<li>Row-vector form: <span class="math display">\[y_i =
\mathbf{x_i^{\prime}} \mathbf{\beta} + \epsilon_i  \text{ for all }
i=1,...,N\]</span></li>
<li>Column-vector form: <span class="math display">\[\mathbf{y} =
\beta_1 \mathbf{x_{1}} + \beta_2 \mathbf{x_{2}} + \beta_3 \mathbf{x_{3}}
+ \mathbf{\epsilon}\]</span></li>
<li>Matrix form: <span class="math display">\[\mathbf{y = X \beta +
\epsilon}\]</span></li>
</ol>
</div>
<div id="section-what-the-matrix-form-looks-like-in-detail"
class="section level3">
<h3>What the matrix-form looks like in detail</h3>
<p><span class="math display">\[\underbrace{\begin{bmatrix} y_1 \\
\vdots \\  y_{N} \end{bmatrix}}_{N \times 1}
        =
        \underbrace{\begin{bmatrix}
        1           &amp; x_{1, 2}   &amp; \cdots &amp;  x_{1, K} \\
        \vdots      &amp; \vdots     &amp; \ddots &amp;  \vdots \\
        1           &amp; x_{N, 2}    &amp; \cdots &amp; x_{N, K}
        \end{bmatrix}}_{N \times K}
        \underbrace{\begin{bmatrix} \beta_1 \\ \beta_2 \\ \vdots \\
\beta_K \end{bmatrix}}_{K \times 1}
        +
    \underbrace{\begin{bmatrix} \epsilon_1 \\ \vdots \\ \epsilon_{N}
\end{bmatrix}}_{N \times 1}\]</span></p>
</div>
<div
id="section-the-matrix-form-is-100-equivalent-to-the-other-three-forms"
class="section level3">
<h3>The matrix form is 100% equivalent to the other three forms</h3>
<p><span class="math display">\[\underbrace{\begin{bmatrix} y_1 \\
\vdots \\  y_{N} \end{bmatrix}}_{N \times 1}
    =
    \underbrace{\begin{bmatrix}
    \beta_1 \cdot 1 + \beta_2 \cdot x_{1, 2} + \cdots + \beta_K \cdot
x_{1, K} \\
    \vdots \\
    \beta_1 \cdot 1 + \beta_2 \cdot x_{N, 2} + \cdots + \beta_K \cdot
x_{N, K} \\
    \end{bmatrix}}_{N \times 1}
    +
    \underbrace{\begin{bmatrix} \epsilon_1 \\ \vdots \\ \epsilon_{N}
\end{bmatrix}}_{N \times 1}\]</span></p>
</div>
</div>
<div id="section-inputs-and-outputs" class="section level2">
<h2>Inputs and outputs</h2>
<div id="section-inputs-data" class="section level3">
<h3>Inputs (data)</h3>
<ol style="list-style-type: decimal">
<li>A length-<span class="math inline">\(N\)</span> outcome vector <span
class="math inline">\(\mathbf{y}\)</span></li>
<li>An <span class="math inline">\(N \times K\)</span> model matrix
<span class="math inline">\(\mathbf{X}\)</span>, which contains a
leading column of 1’s to multiply the intercept</li>
</ol>
</div>
<div id="section-primary-outputs-estimands-parameters"
class="section level3">
<h3>Primary outputs (estimands, parameters)</h3>
<ol style="list-style-type: decimal">
<li>A length-<span class="math inline">\(K\)</span> coefficient vector
<span class="math inline">\(\beta\)</span></li>
<li>A real, strictly positive variance parameter <span
class="math inline">\(\sigma^2\)</span></li>
</ol>
</div>
<div id="section-secondary-outputs-transformed-parameters"
class="section level3">
<h3>Secondary outputs (transformed parameters)</h3>
<p>With estimates <span class="math inline">\(\hat{\beta}\)</span> and
<span class="math inline">\(\hat{\sigma}^2\)</span>, we can directly
calculate the variance-covariance matrix of the coefficients, <span
class="math inline">\(\hat{\mathbf{\Sigma}}\)</span>. This
variance-covariance matrix gives us the parameters that define the joint
multivariate normal <em>sampling distribution</em> of our coefficients:
<span class="math display">\[\hat{\beta} \sim \text{MVN}(\hat{\beta},
\hat{\mathbf{\Sigma}})\]</span> Some things to note:</p>
<ul>
<li>The diagonal of this matrix holds the <em>variances</em> of our
coefficients.</li>
<li>The square root of these variances gives us their <em>standard
errors</em>.</li>
<li>The off-diagonals give us the <em>covariances</em> of any pair of
coefficients.</li>
<li>The variance-covariance matrix is of dimensions <span
class="math inline">\(K \times K\)</span>.</li>
<li>The variance-covariance matrix is <em>symmetrical</em>; thus <span
class="math inline">\(\Sigma_{a,b} = \Sigma_{b, a}\)</span> for any
<span class="math inline">\(a, b \in \{1,...,K\}\)</span>.</li>
</ul>
</div>
</div>
<div id="section-data-preparation" class="section level2">
<h2>Data preparation</h2>
<div id="section-context" class="section level3">
<h3>Context</h3>
<p>The exercise chunk has pre-loaded the data frame <code>gles</code>,
which contains three variables from the 2017 German Longitudinal
Election Study. We want to model respondents’ support for the AfD
(<code>sup_afd</code>, measured on an 11-point scale ranging from -5 to
5) as a function of respondents’ pro-redistribution preferences
(<code>se_self</code>) and anti-immigration preferences
(<code>la_self</code>), including a multiplicative interaction term for
the two predictors (<code>se_self:la_self</code>).</p>
<p>Both <code>se_self</code> and <code>la_self</code> are measured on
11-point scales:</p>
<ul>
<li><code>se_self</code> ranges from values (0) “less taxes and
deductions, even if that means less social spending” to (10) “more
social spending, even if that means more taxes and deductions”.</li>
<li><code>la_self</code> ranges from values (0) “facilitate immigration”
to (10) “restrict immigration”.</li>
</ul>
<p>The model formula is given by <span
class="math display">\[\mathtt{sup\_afd} = \beta_1 + \beta_2
\mathtt{se\_self} + \beta_3 \mathtt{la\_self} + \beta_4 \mathtt{se\_self
\times la\_self} + \epsilon\]</span></p>
</div>
<div id="section-prompt" class="section level3">
<h3>Prompt</h3>
<p>The task is simple: We need the vector <span
class="math inline">\(\mathbf{y}\)</span> and the matrix <span
class="math inline">\(\mathbf{X}\)</span></p>
<p>Hints:</p>
<ul>
<li>You can extract any column from a data frame using the
<code>$</code> operator.</li>
<li>Check out <code>model.matrix()</code>, which takes the right-hand of
a model formula as input and returns a complete model matrix.</li>
</ul>
<div class="tutorial-exercise" data-label="data-prep"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>y &lt;- ...
X &lt;- ...</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="data-prep-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>y &lt;- gles$sup_afd
X &lt;- model.matrix(~ se_self + la_self + se_self:la_self, data = gles)</code></pre>
</div>
</div>
</div>
<div id="section-estimation" class="section level2">
<h2>Estimation</h2>
<div id="section-the-coefficient-vector" class="section level3">
<h3>The coefficient vector</h3>
<p>You have probably seen this before: The OLS estimator for <span
class="math inline">\(\beta\)</span> is given by <span
class="math display">\[\hat{\beta} =
\mathbf{(X^{\prime}X)^{-1}X^{\prime}y}\]</span></p>
<p>Let’s translate this into R! Hints:</p>
<ul>
<li><code>t()</code> transposes matrices/vectors</li>
<li><code>solve()</code> inverts matrices</li>
<li><code>%*%</code> multiplies matrices vectors</li>
</ul>
<div class="tutorial-exercise" data-label="coef-est" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<pre class="text"><code>b &lt;- ...</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="coef-est-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y</code></pre>
</div>
</div>
<div id="section-the-variance-parameter" class="section level3">
<h3>The variance parameter</h3>
<p>The estimator for the variance parameter <span
class="math inline">\(\sigma^2\)</span> is <span
class="math display">\[\hat{\sigma}^2 =
\frac{\mathbf{e}^{\prime}\mathbf{e}}{N-K}\]</span></p>
<p>Here, <span class="math inline">\(\mathbf{e}\)</span> is a
length-<span class="math inline">\(N\)</span> vector of residuals, where
<span class="math inline">\(\mathbf{e} = \mathbf{y} -
\mathbf{X}\beta\)</span>, which is the same as <span
class="math inline">\(\mathbf{e} = \mathbf{y} -
\hat{\mathbf{y}}\)</span>.</p>
<p>For this task, first calculate <span
class="math inline">\(\mathbf{e}\)</span>. Then, calculate <span
class="math inline">\(\hat{\sigma}^2\)</span>. After this, you can
calculate the variance-covariance matrix, which is given by <span
class="math display">\[\hat{\mathbf{\Sigma}} = \hat{\sigma}^2
\mathbf{(X^{\prime}X)^{-1}} \]</span></p>
<p>Hints:</p>
<ul>
<li>Remember that X is of dimensions <span class="math inline">\(N
\times K\)</span>. Try <code>dim()</code>, <code>nrow()</code>, and
<code>ncol</code>.</li>
<li>Check the structure (<code>str()</code>) of <code>e</code>.</li>
<li>Check the <code>class()</code> of <code>sigma2</code>. You want it
to be of a vector of class <code>numeric</code>.</li>
</ul>
<div class="tutorial-exercise-support" data-label="sigma-est-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y</code></pre>
</div>
<div class="tutorial-exercise" data-label="sigma-est"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>e &lt;- ...
N &lt;- ...
K &lt;- ...
sigma2 &lt;- ...
Sigma &lt;- ...</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"sigma-est-setup","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="sigma-est-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>e &lt;- y - X %*% b
N &lt;- nrow(X)
K &lt;- ncol(X)
sigma2 &lt;- t(e) %*% e / (N - K)
Sigma &lt;- as.vector(sigma2) * solve(t(X) %*% X)</code></pre>
</div>
</div>
</div>
<div id="section-processing-prediction" class="section level2">
<h2>Processing (prediction)</h2>
<p>With <span class="math inline">\(\hat\beta\)</span> and <span
class="math inline">\(\hat{\mathbf{\Sigma}}\)</span>, we have knowledge
of the full sampling distribution for <span
class="math inline">\(\hat\beta\)</span>. This allows us to also get
confidence intervals for any post-estimation quantities of interest that
are functions of parameters and data.</p>
<p>We are going to focus on <em>expected values</em>: <span
class="math inline">\(\mathbb{E}[y|\mathbf{\mathbf{x}^{\ast}}] =
\mathbf{x}^{\ast\prime}\hat\beta\)</span>. The vector <span
class="math inline">\(\mathbf{x}^{\ast}\)</span> can contain any
(reasonable) scenario of covariate values. Here, we want to calculate
expected values over the full grid of values of <code>se_self</code> and
<code>la_self</code>.</p>
<p>How can we get it’s standard error? In OLS models, the variance of an
expected value is given by</p>
<p><span class="math display">\[\mathbf{x}^{\ast \prime}
\hat{\mathbf{\Sigma}} \mathbf{x}^{\ast}\]</span></p>
<p>Its square root gives the standard error.</p>
<div id="section-step-1-define-value-sequences-for-the-predictors"
class="section level3">
<h3>Step 1: Define value sequences for the predictors</h3>
<p>Remember that both predictors are measured on 11-point scales ranging
from 0 to 10. But that shouldn’t stop us from calculating at finer
gradations of the two scales. Define value sequences ranging from 0 to
10 in steps of 0.25 for both predictors (Hint: <code>seq()</code>) and
store them in the vectors below.</p>
<div class="tutorial-exercise-support" data-label="proc1-1-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y
e &lt;- y - X %*% b
N &lt;- nrow(X)
K &lt;- ncol(X)
sigma2 &lt;- t(e) %*% e / (N - K)
Sigma &lt;- as.vector(sigma2) * solve(t(X) %*% X)</code></pre>
</div>
<div class="tutorial-exercise" data-label="proc1-1" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<pre class="text"><code>se_vals &lt;- ...
la_vals &lt;- ...</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"proc1-1-setup","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="proc1-1-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>se_vals &lt;- seq(0, 10, .25)
la_vals &lt;- seq(0, 10, .25)</code></pre>
</div>
</div>
<div id="section-step-2-initialize-a-container" class="section level3">
<h3>Step 2: Initialize a container</h3>
<p>Before we start, let’s be clear what we want eventually: For every
value combination of <code>se_vals</code> and <code>la_vals</code>, we
want three estimates:</p>
<ol style="list-style-type: decimal">
<li>The point estimate of the expected value, <span
class="math inline">\(\mathbf{x}^{\ast \prime} \hat \beta\)</span></li>
<li>The lower bound of its confidence interval, <span
class="math inline">\(\mathbf{x}^{\ast \prime} \hat \beta +
\Phi^{-1}(0.025) \sqrt{\mathbf{x}^{\ast \prime}\hat{\mathbf{\Sigma}}
\mathbf{x}^{\ast}}\)</span></li>
<li>The upper bound of its confidence interval, <span
class="math inline">\(\mathbf{x}^{\ast \prime} \hat \beta +
\Phi^{-1}(0.975) \sqrt{\mathbf{x}^{\ast \prime}\hat{\mathbf{\Sigma}}
\mathbf{x}^{\ast}}\)</span></li>
</ol>
<p>So our container must accommodate
<code>length(se_vals) * length(la_vals) * 3L = 5043L</code> values.</p>
<p>We could, of course, store these in a vector of length 5043. Or in
three matrices of dimensions 41$$41, which we could subsequently wrap in
a list. Let’s go for the most convenient solution, though: A
three-dimensional <code>array</code> of dimensions
<code>dim = c(length(se_vals), length(la_vals), 3L)</code>. Let’s
initialize this object with <code>NA</code>s.</p>
<div class="tutorial-exercise-support" data-label="proc2-1-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>se_vals &lt;- seq(0, 10, .25)
la_vals &lt;- seq(0, 10, .25)</code></pre>
</div>
<div class="tutorial-exercise" data-label="proc2-1" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<pre class="text"><code>pred &lt;- ...</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"proc2-1-setup","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="proc2-1-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>pred &lt;- array(NA, dim = c(length(se_vals), length(la_vals), 3L))</code></pre>
</div>
</div>
<div id="section-step-3-use-a-nested-loop-to-fill-the-container"
class="section level3">
<h3>Step 3: Use a nested loop to fill the container</h3>
<p>Hints:</p>
<ul>
<li>Your outer loop should loop through the elements of
<code>se_vals</code> (see <code>seq_along()</code>).</li>
<li>Your inner loop should loop through the elements of
<code>la_vals</code> (see <code>seq_along()</code>).</li>
<li>Define (overwrite) the vector <code>x_star</code> at each iteration
of the loop. Remember that our model matrix has four columns – you will
need a corresponding element
<ol style="list-style-type: decimal">
<li>ones multiplying the intercept</li>
<li>values of <code>se_self</code></li>
<li>values of <code>la_self</code></li>
<li>values of the product term <code>se_self:la_self</code></li>
</ol></li>
<li>Define (overwrite) the vector <code>std_error</code> at each
iteration of the loop. Remember: You want this to be a
<em>scalar</em>!</li>
</ul>
<div class="tutorial-exercise-support" data-label="proc3-1-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y
e &lt;- y - X %*% b
N &lt;- nrow(X)
K &lt;- ncol(X)
sigma2 &lt;- t(e) %*% e / (N - K)
Sigma &lt;- as.vector(sigma2) * solve(t(X) %*% X)
se_vals &lt;- seq(0, 10, .25)
la_vals &lt;- seq(0, 10, .25)
pred &lt;- array(NA, dim = c(length(se_vals), length(la_vals), 3L))</code></pre>
</div>
<div class="tutorial-exercise" data-label="proc3-1" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<pre class="text"><code>for (i in ...) {
  for (j in ...) {
    x_star &lt;- c(...)
    std_err &lt;- ...
    pred[i, j, 1] &lt;- ...
    pred[i, j, 2] &lt;- pred[i, j, 1] + ...
    pred[i, j, 3] &lt;- pred[i, j, 1] + ...
  }
}</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"proc3-1-setup","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="proc3-1-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>for (i in seq_along(se_vals)) {
  for (j in seq_along(la_vals)) {
    x_star &lt;- c(1, se_vals[i], la_vals[j], se_vals[i] * la_vals[j])
    std_err &lt;- sqrt(as.vector(t(x_star) %*% Sigma %*% x_star))
    pred[i, j, 1] &lt;- x_star %*% b
    pred[i, j, 2] &lt;- pred[i, j, 1] + qnorm(.025) * std_err
    pred[i, j, 3] &lt;- pred[i, j, 1] + qnorm(.975) * std_err
  }
}</code></pre>
</div>
</div>
</div>
<div id="section-visualization" class="section level2">
<h2>Visualization</h2>
<p>Time for some shameless self-promotion: We are going to use my
<code>regplane3D</code> package to visualize the expected values of AfD
support as a joint function of socio-economic and immigration
preferences.</p>
<div class="tutorial-exercise-support" data-label="viz-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y
e &lt;- y - X %*% b
N &lt;- nrow(X)
K &lt;- ncol(X)
sigma2 &lt;- t(e) %*% e / (N - K)
Sigma &lt;- as.vector(sigma2) * solve(t(X) %*% X)
se_vals &lt;- seq(0, 10, .25)
la_vals &lt;- seq(0, 10, .25)
pred &lt;- array(NA, dim = c(length(se_vals), length(la_vals), 3L))
for (i in seq_along(se_vals)) {
  for (j in seq_along(la_vals)) {
    x_star &lt;- c(1, se_vals[i], la_vals[j], se_vals[i] * la_vals[j])
    std_err &lt;- sqrt(as.vector(t(x_star) %*% Sigma %*% x_star))
    pred[i, j, 1] &lt;- x_star %*% b
    pred[i, j, 2] &lt;- pred[i, j, 1] + qnorm(.025) * std_err
    pred[i, j, 3] &lt;- pred[i, j, 1] + qnorm(.975) * std_err
  }
}</code></pre>
</div>
<div class="tutorial-exercise" data-label="viz" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<pre class="text"><code>regplane3D::plane3D(
  z = pred,
  x = se_vals,
  y = la_vals,
  main = &quot;Expected AfD Support \n by Redistribution and Immigration Preferences&quot;,
  zlab = &quot;Support AfD&quot;,
  xlab = &quot;Pro-Redistribution&quot;,
  ylab = &quot;Anti-Immigration&quot;,
  xnlines = 6L,
  ynlines = 6L
)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":9,"fig.height":6,"fig.retina":2,"fig.align":"center","fig.keep":"high","fig.show":"asis","out.width":864,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"viz-setup","exercise.checker":"NULL"}</script>
</div>
<p>So, which substantive conclusions can we draw?</p>
</div>
<div id="section-bonus-validity-checks" class="section level2">
<h2>Bonus: Validity checks</h2>
<p>Let’s check if we got everything right!</p>
<p>Estimate the model via <code>lm()</code> and extract the coefficient
vector and the variance-covariance matrix of the coefficients.</p>
<p>Then, use <code>all.equal()</code> with the option
<code>check.attributes = FALSE</code> to check if our estimates differ
from those generated via <code>lm()</code>. Note that you must supply
identical object types, so convert <code>b</code> to a
<code>vector</code>.</p>
<div class="tutorial-exercise-support" data-label="valid-1-setup"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code>b &lt;- solve(t(X) %*% X) %*% t(X) %*% y
e &lt;- y - X %*% b
N &lt;- nrow(X)
K &lt;- ncol(X)
sigma2 &lt;- t(e) %*% e / (N - K)
Sigma &lt;- as.vector(sigma2) * solve(t(X) %*% X)</code></pre>
</div>
<div class="tutorial-exercise" data-label="valid-1" data-caption="Code"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.setup":"valid-1-setup","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="valid-1-solution"
data-caption="Code" data-completion="1" data-diagnostics="1"
data-startover="1" data-lines="0">
<pre class="text"><code># Estimate model
est_lm &lt;- lm(sup_afd ~ se_self + la_self + se_self:la_self, data = gles)

# Extract b and Sigma
b_lm &lt;- coef(est_lm)
Sigma_lm &lt;- vcov(est_lm)

# Check for equality (with minor tolerance)
all.equal(as.vector(b), b_lm, check.attributes = FALSE)
all.equal(Sigma, Sigma_lm, check.attributes = FALSE)</code></pre>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
## --- learnr ---
if ("learnr" %in% (.packages()))
  detach(package:learnr, unload = TRUE)
library(learnr)
knitr::opts_chunk$set(echo = FALSE)

## ---- CRAN Packages ----
## Save package names as a vector of strings
pkgs <-  c("foreign",
           "devtools")

## Install uninstalled packages
lapply(pkgs[!(pkgs %in% installed.packages())], 
       install.packages,
       repos='http://cran.us.r-project.org')

## Load all packages to library and adjust options
lapply(pkgs, library, character.only = TRUE)

## ---- GitHub Packages ----
devtools::install_github("denis-cohen/regplane3D")
library(regplane3D)

## ---- Global learnr Objects ----
gles <- 
  read.dta("https://github.com/denis-cohen/statmodeling/raw/main/data/gles.dta")

y <- gles$sup_afd
X <- model.matrix(~ se_self + la_self + se_self:la_self, data = gles)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::session_stop_event(session)
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-data-prep-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-data-prep-code-editor`)), session)
output$`tutorial-exercise-data-prep-output` <- renderUI({
  `tutorial-exercise-data-prep-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-coef-est-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-coef-est-code-editor`)), session)
output$`tutorial-exercise-coef-est-output` <- renderUI({
  `tutorial-exercise-coef-est-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-sigma-est-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-sigma-est-code-editor`)), session)
output$`tutorial-exercise-sigma-est-output` <- renderUI({
  `tutorial-exercise-sigma-est-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-proc1-1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-proc1-1-code-editor`)), session)
output$`tutorial-exercise-proc1-1-output` <- renderUI({
  `tutorial-exercise-proc1-1-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-proc2-1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-proc2-1-code-editor`)), session)
output$`tutorial-exercise-proc2-1-output` <- renderUI({
  `tutorial-exercise-proc2-1-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-proc3-1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-proc3-1-code-editor`)), session)
output$`tutorial-exercise-proc3-1-output` <- renderUI({
  `tutorial-exercise-proc3-1-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-viz-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-viz-code-editor`)), session)
output$`tutorial-exercise-viz-output` <- renderUI({
  `tutorial-exercise-viz-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-valid-1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-valid-1-code-editor`)), session)
output$`tutorial-exercise-valid-1-output` <- renderUI({
  `tutorial-exercise-valid-1-result`()
})
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.16"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.16"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64]}},"value":[{"type":"character","attributes":{},"value":["base","bslib","cachem","callr","cli","compiler","crayon","curl","datasets","devtools","digest","ellipsis","evaluate","fastmap","foreign","fs","glue","graphics","grDevices","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","learnr","lifecycle","magrittr","markdown","memoise","methods","mime","miniUI","pkgbuild","pkgload","prettyunits","processx","profvis","promises","ps","purrr","R6","Rcpp","regplane3D","remotes","rlang","rmarkdown","rprojroot","rstudioapi","sass","sessioninfo","shiny","stats","stringi","stringr","tools","urlchecker","usethis","utils","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.2.1","0.4.0","1.0.6","3.7.2","3.4.0","4.2.1","1.5.1","4.3.2","4.2.1","2.4.4","0.6.29","0.3.2","0.16","1.1.0","0.8-82","1.5.2","1.6.2","4.2.1","4.2.1","0.5.3","1.5.4","1.6.6","0.1.4","1.8.0","1.40","1.3.0","0.10.1","1.0.2","2.0.3","1.1","2.0.1","4.2.1","0.12","0.1.1.1","1.3.1","1.3.0","1.1.1","3.7.0","0.3.7","1.2.0.1","1.7.1","0.3.4","2.5.1","1.0.9","0.1.0","2.4.2","1.0.5","2.16","2.0.3","0.14","0.4.2","1.2.2","1.7.2","4.2.1","1.7.8","1.4.1","4.2.1","1.0.1","2.1.6","4.2.1","2.5.0","0.33","1.8-4","2.3.5"]}]}]}
</script>
<!--/html_preserve-->
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Lab: R Math &amp;
Programming Refresher</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
